{"version":3,"sources":["webpack:///./src/index.tsx","webpack:///./src/style.scss?47f5","webpack:///./src/style.scss","webpack:///./src/parser.ts","webpack:///./src/syntax.ts","webpack:///./src/semantics.ts"],"names":[],"mappings":"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","file":"main-f893ec69de718137ccde.js","sourcesContent":["import { Syntax } from './syntax';\r\nimport * as React from \"react\";\r\nimport * as ReactDOM from \"react-dom\";\r\nimport * as cn from \"classnames\";\r\nimport { observable, computed, autorun } from \"mobx\";\r\nimport { observer } from \"mobx-react\";\r\nimport DevTools from 'mobx-react-devtools'; \r\nimport \"./style.scss\";\r\nimport { Parser, Logger } from \"./parser\";\r\nimport * as Syntaxes from \"./syntax\";\r\nimport MonacoEditor from 'react-monaco-editor';\r\nimport * as Analysis from \"./semantics\";\r\n\r\ntype ICodeEditor = monaco.editor.ICodeEditor;\r\n\r\nclass Model {\r\n\t@observable windowWidth: number;\r\n\t@observable windowHeight: number;\r\n}\r\n\r\n// https://hediet.de/screenshots/2016_11_23_20_29_46_Webpack_App.png\r\n\r\nvar model = new Model();\r\nmodel.windowWidth = window.innerWidth;\r\nmodel.windowHeight = window.innerHeight;\r\n\r\nwindow.onresize = function() {\r\n\tmodel.windowWidth = window.innerWidth;\r\n\tmodel.windowHeight = window.innerHeight;\r\n};\r\n\r\n\r\n\r\nfunction createViewFor(t: Syntaxes.Term, termContext: TermEvaluationViewContext): JSX.Element {\r\n\tif (t instanceof Syntaxes.Abstraction) return (<AbstractionView term={t} termContext={termContext} />);\r\n\tif (t instanceof Syntaxes.Application) return (<ApplicationView term={t} termContext={termContext} />);\r\n\tif (t instanceof Syntaxes.Variable) return (<VariableView term={t} termContext={termContext} />);\r\n\tif (t instanceof Syntaxes.ParenthesizedTerm) return (<ParenthesizedTermView term={t} termContext={termContext} />);\r\n\r\n\tthrow \"\";\r\n}\r\n\r\n@observer\r\nclass VariableView extends React.Component<{ term: Syntaxes.Variable, termContext: TermEvaluationViewContext }, {}> {\r\n\tpublic render() {\r\n\t\tconst wasArg = this.props.termContext.lastAnalysisResult && this.props.termContext.lastAnalysisResult.instantiations.some(i => i.newValue === this.props.term); \r\n\t\tconst isRedexArg = this.props.termContext.currentRedex && this.props.termContext.currentRedex.argumentTerm === this.props.term;\r\n\t\tconst isRedexVar = this.props.termContext.currentAnalysisResult && this.props.termContext.currentAnalysisResult.instantiations.some(i => i.variable === this.props.term);\r\n\t\treturn (<span className={cn(\"term\", \"variable\", isRedexVar && \"redexVar\", isRedexArg && \"redexArg\", wasArg && \"wasArg\")}>{this.props.term.identifier.text}</span>);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass ParenthesizedTermView extends React.Component<{ term: Syntaxes.ParenthesizedTerm, termContext: TermEvaluationViewContext }, {}> {\r\n\tpublic render() { \r\n\t\tconst wasArg = this.props.termContext.lastAnalysisResult && this.props.termContext.lastAnalysisResult.instantiations.some(i => i.newValue === this.props.term); \r\n\t\tconst isRedexArg = this.props.termContext.currentRedex && this.props.termContext.currentRedex.argumentTerm === this.props.term;\r\n\t\treturn (<span className={cn(\"term\", \"parenthesizedTerm\", isRedexArg && \"redexArg\", wasArg && \"wasArg\")}>({createViewFor(this.props.term.term, this.props.termContext)})</span>); \r\n\t}\r\n}\r\n\r\n@observer\r\nclass ApplicationView extends React.Component<{ term: Syntaxes.Application, termContext: TermEvaluationViewContext }, {}> {\r\n\tpublic render() { \r\n\t\tconst wasArg = this.props.termContext.lastAnalysisResult && this.props.termContext.lastAnalysisResult.instantiations.some(i => i.newValue === this.props.term); \r\n\t\tconst isRedexArg = this.props.termContext.currentRedex && this.props.termContext.currentRedex.argumentTerm === this.props.term;\r\n\t\treturn (<span className={cn(\"term\", \"application\", Analysis.isRedex(this.props.term) && \"redex\", isRedexArg && \"redexArg\", wasArg && \"wasArg\")}>\r\n\t\t\t\t{createViewFor(this.props.term.functionTerm, this.props.termContext)}\r\n\t\t\t\t{createViewFor(this.props.term.argumentTerm, this.props.termContext)}\r\n\t\t\t</span>); \r\n\t\t}\r\n}\r\n\r\n@observer\r\nclass AbstractionView extends React.Component<{ term: Syntaxes.Abstraction, termContext: TermEvaluationViewContext }, {}> {\r\n\r\n\tprivate clicked() {\r\n\t\tif (Analysis.isRedexAbstraction(this.props.term)) {\r\n\t\t\tconst parent = Analysis.parentSkipParenthesizedTerm(this.props.term.parent as Syntaxes.Term) as Syntaxes.Application;\r\n\t\t\tthis.props.termContext.reduceRedex(parent);\r\n\t\t}\r\n\t}\r\n\r\n\tprivate mouseEnteredLeft(entered: boolean) {\r\n\t\tif (!entered) {\r\n\t\t\tthis.props.termContext.selectedRedex = null;\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (Analysis.isRedexAbstraction(this.props.term)) {\r\n\t\t\tconst parent = Analysis.parentSkipParenthesizedTerm(this.props.term.parent as Syntaxes.Term) as Syntaxes.Application;\r\n\t\t\tthis.props.termContext.selectedRedex = parent;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic render() { \r\n\t\tconst wasArg = this.props.termContext.lastAnalysisResult && this.props.termContext.lastAnalysisResult.instantiations.some(i => i.newValue === this.props.term); \r\n\t\tconst isRedexArg = this.props.termContext.currentRedex && this.props.termContext.currentRedex.argumentTerm === this.props.term;\r\n\t\tconst isCurrentRedex = this.props.termContext.currentRedex && Analysis.skipParenthesizedTerm(this.props.termContext.currentRedex.functionTerm) == this.props.term;\r\n\t\tconst isRedexAbstraction = Analysis.isRedexAbstraction(this.props.term);\r\n\t\treturn (\r\n\t\t\t<span className={cn(\"term\", \"abstraction\", isRedexAbstraction && \"redex\", isRedexArg && \"redexArg\", isCurrentRedex && \"currentRedex\", wasArg && \"wasArg\")} >\r\n\t\t\t\t<span className=\"variableAndArrow\">\r\n\t\t\t\t\t<span className=\"declaration variable\" onClick={() => this.clicked()} onMouseEnter={() => this.mouseEnteredLeft(true)} onMouseLeave={() => this.mouseEnteredLeft(false)}>{this.props.term.variableDeclaration.variable.text}</span>\r\n\t\t\t\t\t<span className=\"arrow\"> ⟹ </span>\r\n\t\t\t\t</span> \r\n\t\t\t\t{createViewFor(this.props.term.term, this.props.termContext)}\r\n\t\t\t</span>\r\n\t\t); \r\n\t}\r\n}\r\n\r\nclass TermEvaluationViewContext {\r\n\tconstructor(private readonly view: EvaluationView, private readonly idx: number, private term: Syntaxes.Term, \r\n\t\tpublic preselectedRedex: Syntaxes.Application|null, public preselectedAnalysisResult: { newTerm: Syntaxes.Term, instantiations: Analysis.Instantiation[] }|null,\r\n\t\tpublic lastAnalysisResult: { newTerm: Syntaxes.Term, instantiations: Analysis.Instantiation[] }|null) {}\r\n\r\n\r\n\t@observable selectedRedex: Syntaxes.Application|null;\r\n\r\n\t@computed get currentAnalysisResult(): { newTerm: Syntaxes.Term, instantiations: Analysis.Instantiation[] }|null {\r\n\t\tif (!this.selectedRedex) return this.preselectedAnalysisResult;\r\n\r\n\t\treturn Analysis.reduce(this.term, this.selectedRedex);\r\n\t}\r\n\r\n\t@computed get currentRedex(): Syntaxes.Application|null {\r\n\t\tif (this.selectedRedex) return this.selectedRedex;\r\n\t\treturn this.preselectedRedex;\r\n\t}\r\n\r\n\tpublic reduceRedex(redex: Syntaxes.Application) {\r\n\t\tthis.view.reduceRedex(redex, this.idx);\r\n\t}\r\n}\r\n\r\n@observer\r\nclass EvaluationView extends React.Component<{ term: Syntaxes.Term, onHeightUpdate?: () => void, onRemove: () => void }, {}> {\r\n\t@observable private terms: { term: Syntaxes.Term, selectedRedex: Syntaxes.Application|null, step: { newTerm: Syntaxes.Term, instantiations: Analysis.Instantiation[] }|null }[] = [];\r\n\r\n\tconstructor(props: any) { \r\n\t\tsuper(props);\r\n\t\tthis.terms.push({ term: this.props.term, selectedRedex: null, step: null });\r\n\t}\r\n\r\n\tpublic reduceRedex(redex: Syntaxes.Application, termIdx: number) {\r\n\t\tthis.terms.length = termIdx + 1;\r\n\r\n\t\tconst t = this.terms[termIdx];\r\n\r\n\t\tconst { instantiations, newTerm } = Analysis.reduce(t.term, redex);\r\n\t\tt.selectedRedex = redex;\r\n\t\tt.step = { instantiations, newTerm };\r\n\r\n\t\tthis.terms.push({ term: newTerm, selectedRedex: null, step: null });\r\n\t}\r\n\r\n\tprivate componentDidMount() {\r\n\t\tif (this.props.onHeightUpdate) this.props.onHeightUpdate();\r\n\t}\r\n\r\n\tprivate componentDidUpdate() {\r\n\t\tif (this.props.onHeightUpdate) this.props.onHeightUpdate();\r\n\t}\r\n\r\n\tprivate removeStep(idx: number) {\r\n\t\tif (idx === 0) this.props.onRemove();\r\n\t\tthis.terms.splice(idx);\r\n\t}\r\n\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<div className=\"evaluationView\">\r\n\t\t\t\t{this.terms.map((t, idx) => {\r\n\t\t\t\t\t\tconst prevStep = idx == 0 ? null : this.terms[idx - 1].step;\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<div className=\"evaluationStep\">\r\n\t\t\t\t\t\t\t\t<button onClick={() => this.removeStep(idx)}>X</button> \r\n\t\t\t\t\t\t\t\t{ createViewFor(t.term, new TermEvaluationViewContext(this, idx, t.term, t.selectedRedex, t.step, prevStep )) }\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n\r\nclass RunWidgetUI extends React.Component<{ term: Syntaxes.Term, editor: ICodeEditor }, {}> {\r\n\tpublic render() {\r\n\t\treturn (\r\n\t\t\t<div className=\"run-widget\" >\r\n\t\t\t\t<button onClick={() => this.onClick()}>Run</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tprivate onClick() {\r\n\t\tvar e = this.props.editor;\r\n\t\tvar term = this.props.term;\r\n\t\tvar pos = e.getModel().getPositionAt(term.getEndPos());\r\n\r\n\t\tvar d = document.createElement(\"div\");\r\n\r\n\t\tvar zone = { afterLineNumber: pos.lineNumber, \r\n\t\t\t\tdomNode: d, heightInPx: 0, suppressMouseDown: false, id: -1 };\r\n\r\n\t\tReactDOM.render(<EvaluationView term={term} onRemove={() => { \r\n\t\t\te.changeViewZones((accessor) => {\r\n\t\t\t\taccessor.removeZone(zone.id);\r\n\t\t\t});\r\n\t\t}} \r\n\t\tonHeightUpdate={() => {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tif (!d.childNodes[0]) return; \r\n\r\n\t\t\t\tzone.heightInPx = d.childNodes[0].offsetHeight + 20; // margin\r\n\t\t\t\te.changeViewZones((accessor) => {\r\n\t\t\t\t\tif (zone.id !== -1)\r\n\t\t\t\t\t\taccessor.layoutZone(zone.id);\r\n\t\t\t\t});\r\n\t\t\t}, 0);\r\n\r\n\t\t}} />, d);\r\n\t\td.style.zIndex = \"1\";\r\n\r\n\t\te.changeViewZones((accessor) => {\r\n\t\t\tzone.id = accessor.addZone(zone);\r\n\t\t});\r\n\t}\r\n}\r\n\r\nclass RunWidget implements monaco.editor.IContentWidget {\r\n\t\r\n\tprivate div: HTMLElement;\r\n\tconstructor(private id: number, private pos: monaco.IPosition, term: Syntaxes.Term, editor: ICodeEditor) {\r\n\t\tthis.div = document.createElement(\"div\");\r\n\t\tReactDOM.render(<RunWidgetUI term={term} editor={editor} />, this.div);\r\n\t}\r\n\r\n\tpublic getId(): string {\r\n\t\treturn \"run\" + this.id;\r\n\t}\r\n\r\n\tpublic getDomNode(): HTMLElement {\r\n\t\treturn this.div;\r\n\t}\r\n\r\n\tpublic getPosition(): monaco.editor.IContentWidgetPosition {\r\n\t\treturn { position: this.pos, preference: [ monaco.editor.ContentWidgetPositionPreference.EXACT ] };\r\n\t}\r\n}\r\n\r\n@observer\r\nclass GUI extends React.Component<{}, {}> {\r\n\r\n\r\n\tprivate editor: monaco.editor.IEditor;\r\n\r\n\tprivate editorDidMount(editor: monaco.editor.IEditor) {\r\n\r\n\t\tthis.editor = editor;\r\n\t\tvar m = editor.getModel() as monaco.editor.IModel;\r\n\r\n\t\tautorun(() => {\r\n\t\t\tmodel.windowWidth + model.windowHeight;\r\n\t\t\teditor.layout();\r\n\t\t});\r\n\r\n\t\tthis.onChange();\r\n\t}\r\n\r\n\tprivate widgets: RunWidget[] = [];\r\n\r\n\tprivate onChange() {\r\n\t\tvar m = this.editor.getModel() as monaco.editor.IModel;\r\n\t\tvar logger = new Logger();\r\n\t\tvar doc = Parser.parseDocument(m.getValue(), logger);\r\n\r\n\t\tconst editor = this.editor as monaco.editor.ICodeEditor;\r\n\r\n\t\tconst markers: monaco.editor.IMarkerData[] = [];\r\n\t\tfor (var err of logger.entries) {\r\n\t\t\tconst pos = m.getPositionAt(err.startPos);\r\n\t\t\tconst end = m.getPositionAt(err.endPos);\r\n\t\t\t\r\n\t\t\tmarkers.push({ code: \"error\", \r\n\t\t\t\tstartLineNumber: pos.lineNumber, startColumn: pos.column, \r\n\t\t\t\tendLineNumber: end.lineNumber, endColumn: end.column, \r\n\t\t\t\tmessage: err.message, severity: monaco.Severity.Error, source: \"lambda\" });\r\n\t\t}\r\n\r\n\t\tmonaco.editor.setModelMarkers(m, \"lambda\", markers);\r\n\r\n\t\tfor (var w of this.widgets)\r\n\t\t\teditor.removeContentWidget(w);\r\n\r\n\t\tthis.widgets = [];\r\n\r\n\t\tlet i = 0;\r\n\t\tfor (var mb of doc.members.nodes) {\r\n\t\t\tif (mb instanceof Syntaxes.TermDocumentMember) {\r\n\t\t\t\ti++;\r\n\t\t\t\tconst endPos = mb.getEndPos();\r\n\r\n\t\t\t\tvar div = document.createElement(\"div\");\r\n\t\t\t\tdiv.innerText = \"run\";\r\n\r\n\t\t\t\tconst p = m.getPositionAt(endPos);\r\n\t\t\t\tconst w = new RunWidget(i, p, mb.term, editor);\r\n\t\t\t\tthis.widgets.push(w);\r\n\t\t\t\teditor.addContentWidget(w);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"editor\">\r\n\t\t\t\t<MonacoEditor\r\n\t\t\t\t\tdefaultValue={`\r\ntrue = x => y => x;\r\nfalse = x => y => y;\r\n\r\n(x => x x) (x => x x x);\r\n\r\n(a => (b => a) (x => a) a) (c => d) (c => f);\r\n\r\n`}\r\n\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\theight=\"100%\"\r\n\t\t\t\t\tlanguage=\"lambda\"\r\n\t\t\t\t\teditorDidMount={this.editorDidMount.bind(this)}\r\n\t\t\t\t\tonChange={this.onChange.bind(this)}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nvar target = document.createElement(\"div\");\r\nReactDOM.render(<div><DevTools /><GUI /></div>, target);\r\ndocument.body.appendChild(target);\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.tsx","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./style.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./style.scss\", function() {\n\t\t\tvar newContent = require(\"!!./../node_modules/css-loader/index.js!./../node_modules/sass-loader/index.js!./style.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/style.scss\n// module id = 182\n// module chunks = 0","exports = module.exports = require(\"./../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }\\n\\n.editor {\\n  height: 800px;\\n  padding: 10px; }\\n\\n.run-widget {\\n  margin-left: 20px; }\\n\\n.term {\\n  font-family: Courier New, Courier, monospace; }\\n\\n.variable {\\n  color: blue; }\\n\\n.arrow {\\n  margin-left: 3px;\\n  margin-right: 3px; }\\n\\n.abstraction.redex > .variableAndArrow > .declaration.variable {\\n  text-decoration: underline;\\n  font-weight: bold;\\n  padding: 1px;\\n  padding-left: 3px;\\n  padding-right: 3px;\\n  border: 2px solid transparent;\\n  cursor: pointer; }\\n\\n.abstraction.currentRedex {\\n  border: 2px solid orange;\\n  padding-top: 2px;\\n  padding-bottom: 2px; }\\n\\n.abstraction.currentRedex > .variableAndArrow {\\n  background-color: #ffdb99;\\n  padding-top: 2px;\\n  padding-bottom: 2px; }\\n\\n.evaluationView {\\n  background-color: whitesmoke;\\n  margin-top: 10px;\\n  margin-bottom: 10px; }\\n\\n.variable {\\n  padding: 1px;\\n  padding-left: 3px;\\n  padding-right: 3px; }\\n\\n.term {\\n  border: solid transparent;\\n  border-width: 0px 2px 0px 2px; }\\n\\n.redexVar {\\n  background-color: #b8e2fc;\\n  border: 2px solid blue;\\n  cursor: pointer; }\\n\\n.redexArg {\\n  background-color: #ffcccc;\\n  border: 2px solid red;\\n  cursor: pointer;\\n  padding-top: 2px;\\n  padding-bottom: 2px; }\\n\\n.evaluationStep {\\n  padding: 10px; }\\n\\n.wasArg {\\n  box-shadow: 0 0 0 7px rgba(0, 0, 0, 0.05); }\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/css-loader!./~/sass-loader!./src/style.scss\n// module id = 183\n// module chunks = 0","import { LexerFactory, Lexer, TokenWithPosAndLen } from \"typed-lexer\";\r\nimport { TokenKind, Syntax } from \"./syntax\";\r\nimport * as Syntaxes from \"./syntax\";\r\n\r\nexport function createLexerFor(input: string) {\r\n\treturn new LambdaLexerFactory().getLexerFor(input); \r\n}\r\n\r\nclass LambdaLexerFactory extends LexerFactory<TokenKind, {}> {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.addSimpleRule(\"=>\", TokenKind.FatArrow);\r\n\t\tthis.addSimpleRule(\"->\", TokenKind.SmallArrow);\r\n\t\tthis.addSimpleRule(\"(\", TokenKind.OpeningParen);\r\n\t\tthis.addSimpleRule(\")\", TokenKind.ClosingParen);\r\n\t\tthis.addSimpleRule(\";\", TokenKind.Semicolon);\r\n\t\tthis.addSimpleRule(\"=\", TokenKind.Equals);\r\n\t\tthis.addSimpleRule(/\\/\\*.*\\*\\//, TokenKind.Comment);\r\n\t\tthis.addSimpleRule(/\\/\\/.*\\n/, TokenKind.Comment);\r\n\t\t\r\n\t\tthis.addSimpleRule(/[a-zA-Z_][a-zA-Z0-9_]*/, TokenKind.Identifier);\r\n\t\tthis.addSimpleRule(/\\s+/, TokenKind.WS);\r\n \r\n\t\tthis.addSimpleRule(/./, TokenKind.Invalid);\r\n\t}\r\n}\r\n\r\ntype L = Lexer<TokenKind, {}>;\r\n\r\ninterface LogEntry {\r\n\tstartPos: number;\r\n\tendPos: number;\r\n\tmessage: string;\r\n}\r\n\r\nexport class Logger {\r\n\tpublic entries: LogEntry[] = [];\r\n\tpublic logError(msg: string, startPos: number, endPos: number) {\r\n\t\tthis.entries.push({ message: msg, startPos: startPos, endPos: endPos });\r\n\t}\r\n}\r\n\r\nfunction getLexerPos(lexer: L): number {\r\n\treturn (lexer as any).pos;\r\n}\r\n\r\nexport class Parser {\r\n\r\n\tpublic static parseDocument(input: string, logger: Logger): Syntaxes.LambdaDocument {\r\n\t\tconst lexer = createLexerFor(input);\r\n\t\tlexer.next();\r\n\t\treturn new Parser(input).parseDocumentLexer(lexer, logger);\r\n\t}\r\n\r\n\tconstructor(private input: string) {}\r\n\r\n\r\n\tprivate parseDocumentLexer(lexer: L, logger: Logger): Syntaxes.LambdaDocument {\r\n\t\t\r\n\t\tvar nodes = new Syntaxes.SyntaxArray<Syntaxes.DocumentMember>();\r\n\r\n\t\twhile (true) {\r\n\r\n\t\t\tthis.skipWs(lexer);\r\n\t\t\tif (lexer.getCurToken() === undefined) break;\r\n\r\n\t\t\tlet m: Syntaxes.DocumentMember|false = this.tryReadDefinitionMember(lexer, logger);\r\n\t\t\tif (m === false)\r\n\t\t\t\tm = this.readTermMember(lexer, logger);\r\n\r\n\t\t\tnodes.nodes.push(m);\r\n\t\t}\r\n\r\n\t\tconst lambdaDoc = new Syntaxes.LambdaDocument();\r\n\t\tlambdaDoc.members = nodes;\r\n\r\n\t\tlambdaDoc.setParents();\r\n\r\n\t\treturn lambdaDoc;\r\n\t}\r\n\r\n\tprivate readTermMember(lexer: L, logger: Logger): Syntaxes.TermDocumentMember {\r\n\t\tconst term = this.parseTerm(lexer, logger);\r\n\r\n\t\tif (term instanceof Syntaxes.MissingTerm) {\r\n\t\t\tconst cur = lexer.getCur();\r\n\t\t\tlogger.logError(\"Unexpected token.\", cur.startPos, cur.startPos + cur.length);\r\n\t\t\tlexer.next();\r\n\t\t}\r\n\r\n\t\tthis.skipWs(lexer);\r\n\r\n\t\tlet semicolonToken: TokenWithPosAndLen<TokenKind.Semicolon>|number = getLexerPos(lexer);\r\n\t\tif (lexer.getCurToken() === TokenKind.Semicolon) {\r\n\t\t\tsemicolonToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.Semicolon>;\r\n\t\t\tlexer.next();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tlogger.logError(\"Semicolon is missing.\", semicolonToken, semicolonToken);\r\n\t\t}\r\n\t\tconst member = new Syntaxes.TermDocumentMember();\r\n\t\tmember.term = term;\r\n\t\tmember.semicolon = this.toToken(semicolonToken);\r\n\t\treturn member;\r\n\t}\r\n\r\n\tprivate tryReadDefinitionMember(lexer: L, logger: Logger): Syntaxes.DefinitionMember|false {\r\n\t\tif (lexer.getCurToken() === TokenKind.Identifier) {\r\n\r\n\t\t\tconst stack: TokenWithPosAndLen<TokenKind>[] = [];\r\n\t\t\tconst identifier = lexer.getCur() as TokenWithPosAndLen<TokenKind.Identifier>;\r\n\t\t\tstack.push(identifier);\r\n\t\t\tlexer.next();\r\n\r\n\t\t\tstack.push(...this.skipWs(lexer));\r\n\r\n\t\t\tif (lexer.getCurToken() === TokenKind.Equals) {\r\n\t\t\t\tconst eqToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.Equals>;\r\n\t\t\t\tlexer.next();\r\n\t\t\t\tthis.skipWs(lexer);\r\n\t\t\t\tconst term = this.parseTerm(lexer, logger);\r\n\t\t\t\tthis.skipWs(lexer);\r\n\r\n\t\t\t\tlet semicolonToken: TokenWithPosAndLen<TokenKind.Semicolon>|number = getLexerPos(lexer);\r\n\t\t\t\tif (lexer.getCurToken() === TokenKind.Semicolon) {\r\n\t\t\t\t\tsemicolonToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.Semicolon>;\r\n\t\t\t\t\tlexer.next();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlogger.logError(\"Semicolon is missing.\", semicolonToken, semicolonToken);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tconst member = new Syntaxes.DefinitionMember();\r\n\t\t\t\tmember.equals = this.toToken(eqToken);\r\n\t\t\t\tmember.name = this.toToken(identifier);\r\n\t\t\t\t\r\n\t\t\t\tmember.term = term;\r\n\t\t\t\tmember.semicolon = this.toToken(semicolonToken);\r\n\t\t\t\treturn member;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif (lexer.getCur() !== undefined)\r\n\t\t\t\t\tstack.push(lexer.getCur());\r\n\t\t\t\tvar first = stack.splice(0, 1)[0];\r\n\t\t\t\tlexer.getRestrained().unshift(...stack);\r\n\t\t\t\t(lexer as any).cur = first;\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n\r\n\r\n\tprivate toToken<T>(token: TokenWithPosAndLen<T>|number): Syntaxes.Token<T> {\r\n\t\tif (typeof token === \"number\")\r\n\t\t{\r\n\t\t\tconst result = new Syntaxes.Token<T>();\r\n\t\t\tresult.kind = TokenKind.Missing as any as T;\r\n\t\t\tresult.startPos = token;\r\n\t\t\tresult.endPos = token;\r\n\t\t\tresult.text = \"\";\r\n\t\t\treturn result;\r\n\t\t}\r\n\r\n\t\tconst result = new Syntaxes.Token<T>();\r\n\t\tresult.kind = token.token;\r\n\t\tresult.startPos = token.startPos;\r\n\t\tresult.endPos = token.startPos + token.length;\r\n\t\tresult.text = this.input.substring(result.startPos, result.endPos);\r\n\r\n\t\treturn result;\r\n\t}\r\n\r\n\tprivate skipWs(lexer: L): TokenWithPosAndLen<TokenKind.WS | TokenKind.Comment>[] {\r\n\t\tconst result: TokenWithPosAndLen<TokenKind.WS | TokenKind.Comment>[] = [];\r\n\t\twhile (true) {\r\n\t\t\tconst cur = lexer.getCurToken();\r\n\t\t\tif (cur !== TokenKind.WS && cur !== TokenKind.Comment)\r\n\t\t\t\treturn result;\r\n\t\t\tresult.push(lexer.getCur() as TokenWithPosAndLen<TokenKind.WS | TokenKind.Comment>);\r\n\t\t\tlexer.next();\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate parseTerm(lexer: L, logger: Logger): Syntaxes.Term {\r\n\t\tlet lastTerm: Syntaxes.Term|undefined = undefined;\r\n\r\n\t\twhile (true) {\r\n\t\t\tvar term = this.parseTerm2(lexer, logger);\r\n\r\n\t\t\tif (term === undefined)\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tif (lastTerm === undefined) {\r\n\t\t\t\tlastTerm = term;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tconst app = new Syntaxes.Application();\r\n\t\t\t\tapp.functionTerm = lastTerm;\r\n\t\t\t\tapp.argumentTerm = term;\r\n\t\t\t\tlastTerm = app;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (lastTerm === undefined) {\r\n\t\t\tconst r = new Syntaxes.MissingTerm();\r\n\t\t\tlogger.logError(\"Term is missing.\", getLexerPos(lexer), getLexerPos(lexer));\r\n\t\t\tr.missingToken = this.toToken(getLexerPos(lexer)) as Syntaxes.Token<TokenKind.Missing>;\r\n\t\t\treturn r;\r\n\t\t}\r\n\r\n\t\treturn lastTerm;\r\n\t}\r\n\r\n\tprivate parseTerm2(lexer: L, logger: Logger): Syntaxes.Term|undefined {\r\n\t\tthis.skipWs(lexer);\r\n\t\tconst kind = lexer.getCurToken();\r\n\t\t\r\n\t\tswitch (kind) {\r\n\t\t\tcase TokenKind.Identifier:\r\n\t\t\t\tconst identifierToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.Identifier>;\r\n\t\t\t\tconst identifier = this.toToken(identifierToken);\r\n\t\t\t\tlexer.next();\r\n\r\n\t\t\t\tthis.skipWs(lexer);\r\n\t\t\t\tconst kind2 = lexer.getCurToken(); \r\n\t\t\t\tif (kind2 === TokenKind.FatArrow || kind2 === TokenKind.SmallArrow) {\r\n\t\t\t\t\tconst arrowToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.FatArrow | TokenKind.SmallArrow>\r\n\t\t\t\t\tlexer.next();\r\n\t\t\t\t\tconst innerTerm = this.parseTerm(lexer, logger);\r\n\t\t\t\t\tvar abstraction = new Syntaxes.Abstraction();\r\n\r\n\t\t\t\t\tvar varDecl = new Syntaxes.VariableDeclaration();\r\n\t\t\t\t\tvarDecl.variable = identifier;\r\n\r\n\t\t\t\t\tabstraction.variableDeclaration = varDecl;\r\n\t\t\t\t\tabstraction.arrow = this.toToken(arrowToken);\r\n\t\t\t\t\tabstraction.term = innerTerm;\r\n\t\t\t\t\treturn abstraction;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconst v = new Syntaxes.Variable();\r\n\t\t\t\tv.identifier = identifier;\r\n\t\t\t\treturn v;\r\n\r\n\t\t\tcase TokenKind.OpeningParen: {\r\n\t\t\t\tconst openParenToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.OpeningParen>;\r\n\t\t\t\tlexer.next();\r\n\t\t\t\tconst innerTerm = this.parseTerm(lexer, logger);\r\n\t\t\t\tlet closeParenToken: TokenWithPosAndLen<TokenKind.ClosingParen>|number = getLexerPos(lexer);\r\n\t\t\t\tif (lexer.getCur().token === TokenKind.ClosingParen) {\r\n\t\t\t\t\tcloseParenToken = lexer.getCur() as TokenWithPosAndLen<TokenKind.ClosingParen>;\r\n\t\t\t\t\tlexer.next();\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlogger.logError(\"')' is missing.\", closeParenToken, closeParenToken);\r\n\t\t\t\t}\r\n\t\t\t\tvar term = new Syntaxes.ParenthesizedTerm();\r\n\t\t\t\tterm.openingParen = this.toToken(openParenToken);\r\n\t\t\t\tterm.term = innerTerm;\r\n\t\t\t\tterm.closingParen = this.toToken(closeParenToken);\r\n\t\t\t\treturn term;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn undefined;\r\n\t}\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/parser.ts","\r\nexport abstract class Syntax {\r\n\tpublic abstract getChildren(): Syntax[];\r\n\r\n\tpublic getStartPos(): number {\r\n\t\tif (this instanceof Token) {\r\n\t\t\treturn this.startPos;\r\n\t\t}\r\n\r\n\t\tvar children = this.getChildren();\r\n\t\treturn children[0].getStartPos();\r\n\t}\r\n\r\n\tpublic getEndPos(): number {\r\n\t\tif (this instanceof Token) {\r\n\t\t\treturn this.endPos;\r\n\t\t}\r\n\r\n\t\tvar children = this.getChildren();\r\n\t\treturn children[children.length - 1].getEndPos();\r\n\t}\r\n\r\n\tpublic toString(): string {\r\n\t\tif (this instanceof Token) {\r\n\t\t\treturn this.text;\r\n\t\t}\r\n\t\treturn this.getChildren().map(c => c.toString()).join(\" \");\r\n\t}\r\n\r\n\tpublic setParents() {\r\n\t\tfor (var c of this.getChildren()) {\r\n\t\t\tc.parent = this;\r\n\t\t\tc.setParents();\r\n\t\t}\r\n\t}\r\n\r\n\tpublic parent: Syntax;\r\n}\r\n\r\nexport enum TokenKind {\r\n\tFatArrow,\r\n\tSmallArrow,\r\n\tOpeningParen,\r\n\tClosingParen,\r\n\tSemicolon,\r\n\tEquals,\r\n\tWS,\r\n\tComment,\r\n\tIdentifier,\r\n\tInvalid,\r\n\tMissing\r\n}\r\n\r\nexport class Token<Kind> extends Syntax {\r\n\tpublic kind: Kind;\r\n\tpublic startPos: number;\r\n\tpublic endPos: number;\r\n\tpublic text: string;\r\n\r\n\tpublic getChildren(): Syntax[] { return []; }\r\n\r\n\tpublic clone(): Token<Kind> {\r\n\t\tconst r = new Token<Kind>();\r\n\t\tr.text = this.text;\r\n\t\tr.kind = this.kind;\r\n\t\treturn r;\r\n\t}\r\n}\r\n\r\nexport class SyntaxArray<T extends Syntax> extends Syntax {\r\n\tpublic nodes: T[] = [];\r\n\r\n\tpublic getChildren(): Syntax[] { return this.nodes; }\r\n}\r\n\r\nexport class LambdaDocument extends Syntax {\r\n\tpublic members: SyntaxArray<DocumentMember>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.members]; }\r\n}\r\n\r\nexport abstract class DocumentMember extends Syntax {\r\n\tprivate _documentMemberMarker: number;\r\n}\r\n\r\n// term;\r\nexport class TermDocumentMember extends DocumentMember {\r\n\tpublic term: Term;\r\n\tpublic semicolon: Token<TokenKind.Semicolon>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.term, this.semicolon]; }\r\n}\r\n\r\n// name = term;\r\nexport class DefinitionMember extends DocumentMember {\r\n\tpublic name: Token<TokenKind.Identifier>;\r\n\tpublic equals: Token<TokenKind.Equals>;\r\n\tpublic term: Term;\r\n\tpublic semicolon: Token<TokenKind.Semicolon>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.name, this.equals, this.term, this.semicolon]; }\r\n}\r\n\r\nexport abstract class Term extends Syntax {\r\n\tprivate _termMarker: any;\r\n}\r\n\r\n// (term)\r\nexport class ParenthesizedTerm extends Term {\r\n\tpublic openingParen: Token<TokenKind.OpeningParen>;\r\n\tpublic term: Term;\r\n\tpublic closingParen: Token<TokenKind.ClosingParen>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.openingParen, this.term, this.closingParen]; }\r\n}\r\n\r\n\r\n// identifier\r\nexport class Variable extends Term {\r\n\tpublic identifier: Token<TokenKind.Identifier>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.identifier]; }\r\n}\r\n\r\nexport class VariableDeclaration extends Syntax {\r\n\tpublic variable: Token<TokenKind.Identifier>;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.variable]; }\r\n}\r\n\r\n// variable => term\r\nexport class Abstraction extends Term {\r\n\tpublic variableDeclaration: VariableDeclaration;\r\n\tpublic arrow: Token<TokenKind.FatArrow | TokenKind.SmallArrow>;\r\n\tpublic term: Term;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.variableDeclaration, this.arrow, this.term]; }\r\n}\r\n\r\n\r\n// functionTerm argumentTerm\r\nexport class Application extends Term {\r\n\tpublic functionTerm: Term;\r\n\tpublic argumentTerm: Term;\r\n\r\n\tpublic getChildren(): Syntax[] { return [this.functionTerm, this.argumentTerm]; }\r\n}\r\n\r\nexport class MissingTerm extends Term {\r\n\tpublic missingToken: Token<TokenKind.Missing>;\r\n\r\n\tpublic getChildren(): Syntax[] { return []; }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/syntax.ts","\r\nimport * as s from \"./syntax\";\r\n\r\nexport function getDeclaration(v: s.Variable): s.VariableDeclaration|null {\r\n\tlet t: s.Syntax = v;\r\n\twhile (t instanceof s.Term) {\r\n\t\tif (t instanceof s.Abstraction) {\r\n\t\t\tif (t.variableDeclaration.variable.text === v.identifier.text)\r\n\t\t\t\treturn t.variableDeclaration;\r\n\t\t}\r\n\t\tt = t.parent;\r\n\t}\r\n\treturn null;\r\n}\r\n\r\nexport function getUsages(v: s.VariableDeclaration): s.Variable[] {\r\n\r\n}\r\n\r\nexport function getDeclaredVarsInScope(term: s.Term): s.VariableDeclaration[] {\r\n\tlet result: s.VariableDeclaration[];\r\n\tif (term.parent instanceof s.Term) {\r\n\t\tresult = getDeclaredVarsInScope(term.parent);\r\n\t}\r\n\telse {\r\n\t\tresult = [];\r\n\t}\r\n\r\n\tif (term.parent instanceof s.Abstraction) {\r\n\t\tresult.push(term.parent.variableDeclaration);\r\n\t}\r\n\r\n\treturn result;\r\n}\r\n\r\nexport function getAllRedexes(term: s.Term): s.Application[] {\r\n\tlet r: s.Application[] = [];\r\n\tfor (var c of term.getChildren()) {\r\n\t\tif (c instanceof s.Term)\r\n\t\t\tr.push(...getAllRedexes(c));\r\n\t}\r\n\t\r\n\tif (isRedex(term)) {\r\n\t\tr.push(term);\r\n\t}\r\n\r\n\treturn r;\r\n}\r\n\r\nexport interface Instantiation {\r\n\tvariable: s.Variable;\r\n\tnewValue: s.Term;\r\n}\r\n\r\nexport function reduce(term: s.Term, redex: s.Application): { newTerm: s.Term, instantiations: Instantiation[] } {\r\n\r\n\tlet instantiations: { variable: s.Variable, newValue: s.Term }[] = [];\r\n\r\n\tlet newTerm = clone(term, t => {\r\n\t\tif (t === redex) {\r\n\t\t\tvar redexFunc = skipParenthesizedTerm(redex.functionTerm) as s.Abstraction;\r\n\t\t\treturn clone(redexFunc.term, t2 => {\r\n\r\n\t\t\t\tif ((t2 instanceof s.Variable) && getDeclaration(t2) === redexFunc.variableDeclaration) {\r\n\t\t\t\t\tvar cloned = clone(redex.argumentTerm, t3 => t3);\r\n\t\t\t\t\tinstantiations.push({ variable: t2, newValue: cloned });\r\n\t\t\t\t\treturn cloned;\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn t2;\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn t;\r\n\t});\r\n\tnewTerm.setParents();\r\n\r\n\treturn { newTerm, instantiations };\r\n}\r\n\r\nexport function skipParenthesizedTerm(term: s.Term): s.Term {\r\n\twhile (term instanceof s.ParenthesizedTerm) {\r\n\t\tterm = term.term;\r\n\t}\r\n\treturn term;\r\n}\r\n\r\nexport function parentSkipParenthesizedTerm(term: s.Term): s.Term {\r\n\twhile (term instanceof s.ParenthesizedTerm) {\r\n\t\tterm = term.parent as s.Term;\r\n\t}\r\n\treturn term;\r\n}\r\n\r\nexport function isRedex(term: s.Term): term is s.Application {\r\n\treturn term instanceof s.Application && skipParenthesizedTerm(term.functionTerm) instanceof s.Abstraction;\r\n}\r\n\r\nexport function isRedexAbstraction(term: s.Term): term is s.Abstraction {\r\n\tif (!(term instanceof s.Abstraction)) return false;\r\n\tconst parent = parentSkipParenthesizedTerm(term.parent as s.Term);\r\n\treturn parent instanceof s.Application && skipParenthesizedTerm(parent.functionTerm) === term; \r\n}\r\n\r\nexport function clone(term: s.Term, f: (t: s.Term) => s.Term): s.Term {\r\n\r\n\tconst term2 = f(term);\r\n\tif (term2 !== term) return term2;\r\n\r\n\tif (term instanceof s.Variable) {\r\n\t\tconst v = new s.Variable();\r\n\t\tv.identifier = term.identifier.clone();\r\n\t\treturn v;\r\n\t}\r\n\telse if (term instanceof s.Abstraction) {\r\n\t\tconst t = new s.Abstraction();\r\n\t\tt.variableDeclaration = new s.VariableDeclaration();\r\n\t\tt.variableDeclaration.variable = term.variableDeclaration.variable.clone();\r\n\t\tt.arrow = term.arrow.clone();\r\n\t\tt.term = clone(term.term, f);\r\n\t\treturn t;\r\n\t}\r\n\telse if (term instanceof s.Application) {\r\n\t\tconst t = new s.Application();\r\n\t\tt.argumentTerm = clone(term.argumentTerm, f);\r\n\t\tt.functionTerm = clone(term.functionTerm, f);\r\n\t\treturn t;\r\n\t}\r\n\telse if (term instanceof s.ParenthesizedTerm) {\r\n\t\tconst t = new s.ParenthesizedTerm();\r\n\t\tt.openingParen = term.openingParen.clone();\r\n\t\tt.term = clone(term.term, f);\r\n\t\tt.closingParen = term.closingParen.clone();\r\n\t\treturn t; \r\n\t}\r\n\r\n\tthrow \"unsupported.\";\r\n}\r\n\r\n/*public getAllFreeVarsIn(term: s.Term): s.Variable[] {\r\n\r\n\r\n}*/\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/semantics.ts"],"sourceRoot":""}